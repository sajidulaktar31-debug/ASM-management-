<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Aktar Super Mart</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#f1f5f9;padding:15px}
.box{max-width:420px;margin:auto;background:#fff;padding:15px;border-radius:8px}
.hidden{display:none}
input,button{width:100%;padding:10px;margin:6px 0}
button{background:#2563eb;color:#fff;border:none;border-radius:6px}
.card{background:#e0e7ff;padding:10px;margin:8px 0;border-radius:6px}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox" class="box">
  <h2>Login</h2>
  <input id="uid" placeholder="User ID">
  <input id="pwd" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="msg" style="color:red"></p>
</div>

<!-- OWNER DASHBOARD -->
<div id="ownerBox" class="box hidden">
  <h2>ðŸ‘‘ Owner Dashboard</h2>
  <div class="card">Total Products: <b id="p">0</b></div>
  <div class="card">Total Stock: <b id="s">0</b></div>
  <div class="card">Total Sale: â‚¹<b id="sale">0</b></div>
  <button onclick="logout()">Logout</button>
</div>

<!-- EMPLOYEE INVENTORY -->
<div id="empBox" class="box hidden">
  <h2>ðŸ‘· Weekly Inventory</h2>
  <input class="inv" data-name="Rice" placeholder="Rice stock">
  <input class="inv" data-name="Oil" placeholder="Oil stock">
  <input class="inv" data-name="Sugar" placeholder="Sugar stock">
  <button onclick="saveInv()">Save Inventory</button>
  <button onclick="logout()">Logout</button>
</div>

<script>
// AUTO LOGIN
const role = localStorage.getItem("role");
if(role) loadUI(role);

// LOGIN FUNCTION
function login(){
  const id = uid.value.trim();
  const pass = pwd.value.trim();

  if(id==="owner" && pass==="1234"){
    localStorage.setItem("role","owner");
    loadUI("owner");
  }
  else if(id==="employee" && pass==="1111"){
    localStorage.setItem("role","employee");
    loadUI("employee");
  }
  else{
    msg.innerText="âŒ Wrong ID or Password";
  }
}

// LOAD UI
function loadUI(role){
  loginBox.classList.add("hidden");

  if(role==="owner"){
    ownerBox.classList.remove("hidden");
    loadDashboard();
  }
  if(role==="employee"){
    empBox.classList.remove("hidden");
  }
}

// DASHBOARD
function loadDashboard(){
  const inv = JSON.parse(localStorage.getItem("inventory")||"[]");
  let total=0;
  inv.forEach(i=>total+=i.stock);
  p.innerText = inv.length;
  s.innerText = total;
  sale.innerText = localStorage.getItem("totalSale")||0;
}

// SAVE INVENTORY
function saveInv(){
  const data=[];
  document.querySelectorAll(".inv").forEach(i=>{
    data.push({name:i.dataset.name,stock:Number(i.value||0)});
  });
  localStorage.setItem("inventory",JSON.stringify(data));
  alert("âœ… Inventory Saved");
}

// LOGOUT
function logout(){
  localStorage.clear();
  location.reload();
}
</script>

</body>
</html>
